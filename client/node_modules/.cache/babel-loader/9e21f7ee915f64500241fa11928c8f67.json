{"ast":null,"code":"var _jsxFileName = \"/Users/justinpatterson/git-stuff/codeworks/projects/name-to-be-changed/client/src/components/UserSettings/UserSettings.tsx\";\nimport React, { useEffect, useState } from 'react';\nimport { useMutation, useQuery } from '@apollo/client';\nimport { GET_USERS } from '../../graphql/Queries';\nimport { UPDATE_USER } from '../../graphql/Mutations';\n\nconst UserSettings = () => {\n  const {\n    data,\n    loading,\n    error\n  } = useQuery(GET_USERS);\n  const [updateUserInfo] = useMutation(UPDATE_USER);\n  const [imageFile, setImageFile] = useState(null);\n  const [user, setUser] = useState({\n    _id: '',\n    name: '',\n    email: '',\n    bio: '',\n    imageUrl: '',\n    status: ''\n  });\n  useEffect(() => {\n    var _data$getUsers$, _data$getUsers$2, _data$getUsers$3, _data$getUsers$4, _data$getUsers$5, _data$getUsers$6;\n\n    setUser({\n      _id: data === null || data === void 0 ? void 0 : (_data$getUsers$ = data.getUsers[0]) === null || _data$getUsers$ === void 0 ? void 0 : _data$getUsers$._id,\n      name: data === null || data === void 0 ? void 0 : (_data$getUsers$2 = data.getUsers[0]) === null || _data$getUsers$2 === void 0 ? void 0 : _data$getUsers$2.name,\n      email: data === null || data === void 0 ? void 0 : (_data$getUsers$3 = data.getUsers[0]) === null || _data$getUsers$3 === void 0 ? void 0 : _data$getUsers$3.email,\n      bio: data === null || data === void 0 ? void 0 : (_data$getUsers$4 = data.getUsers[0]) === null || _data$getUsers$4 === void 0 ? void 0 : _data$getUsers$4.bio,\n      imageUrl: data === null || data === void 0 ? void 0 : (_data$getUsers$5 = data.getUsers[0]) === null || _data$getUsers$5 === void 0 ? void 0 : _data$getUsers$5.imageUrl,\n      status: data === null || data === void 0 ? void 0 : (_data$getUsers$6 = data.getUsers[0]) === null || _data$getUsers$6 === void 0 ? void 0 : _data$getUsers$6.status\n    });\n  }, [data]);\n\n  const handleChange = event => {\n    const stateKey = event.currentTarget.name;\n    const newValue = event.currentTarget.value;\n    setUser(prevState => ({ ...prevState,\n      [stateKey]: newValue\n    }));\n  };\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n    const userDetails = {\n      _id: user._id,\n      name: user.name,\n      email: user.email,\n      bio: user.bio,\n      status: user.status\n    };\n\n    if (imageFile) {\n      const data = new FormData();\n      data.append('file', imageFile);\n      data.append('upload_preset', 'jfoqugj1');\n      data.append('api_key', 'process.env.NODE_ENV.REACT_APP_CLOUDINARY_API_KEY');\n      const res = await fetch('https://api.cloudinary.com/v1_1/dpyiqv7ej/image/upload', {\n        method: 'POST',\n        body: data\n      });\n      const upload = await res.json();\n      userDetails.imageUrl = upload.url;\n    }\n\n    updateUserInfo({\n      variables: {\n        userDetails: userDetails\n      }\n    });\n  };\n\n  const uploadImage = async event => {\n    const file = event.currentTarget.files;\n\n    if (file && file[0]) {\n      setImageFile(file[0]);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"user-settings-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }\n  }, \"User Settings\"), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"form-user-settings\",\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: user.imageUrl,\n    alt: \"user_image\",\n    width: \"300\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 11\n    }\n  }, \"Upload New Profile Image\"), /*#__PURE__*/React.createElement(\"input\", {\n    name: \"file\",\n    type: \"file\",\n    placeholder: \"Upload a new profile image\",\n    onChange: uploadImage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"name\",\n    placeholder: user.name,\n    name: \"name\",\n    type: \"text\",\n    value: user.name,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 9\n    }\n  }, \"Email\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"email\",\n    placeholder: user.email,\n    name: \"email\",\n    type: \"text\",\n    value: user.email,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"bio\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 9\n    }\n  }, \"Bio\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"bio\",\n    placeholder: user.bio,\n    name: \"bio\",\n    type: \"text\",\n    value: user.bio,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"status\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 9\n    }\n  }, \"Status\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"status\",\n    placeholder: user.status,\n    name: \"status\",\n    type: \"text\",\n    value: user.status,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 8\n    }\n  }, \"Save Changes\")));\n};\n\nexport default UserSettings;","map":{"version":3,"sources":["/Users/justinpatterson/git-stuff/codeworks/projects/name-to-be-changed/client/src/components/UserSettings/UserSettings.tsx"],"names":["React","useEffect","useState","useMutation","useQuery","GET_USERS","UPDATE_USER","UserSettings","data","loading","error","updateUserInfo","imageFile","setImageFile","user","setUser","_id","name","email","bio","imageUrl","status","getUsers","handleChange","event","stateKey","currentTarget","newValue","value","prevState","handleSubmit","preventDefault","userDetails","FormData","append","res","fetch","method","body","upload","json","url","variables","uploadImage","file","files"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, FormEvent, ChangeEvent } from 'react';\nimport { useMutation, useQuery } from '@apollo/client';\nimport { GET_USERS } from '../../graphql/Queries';\nimport { UPDATE_USER } from '../../graphql/Mutations';\nimport { User } from './User';\n\nconst UserSettings = (): JSX.Element => {\n\n  const { data, loading, error }  = useQuery(GET_USERS);\n  const [ updateUserInfo ]  = useMutation<{updateUser: User}>(UPDATE_USER);\n\n  const [ imageFile, setImageFile ] = useState<null | File>(null);\n  const [ user, setUser ] = useState<User>({\n    _id: '',\n    name: '',\n    email: '',\n    bio: '',\n    imageUrl: '',\n    status: ''\n  });\n\n  useEffect(() => {\n    setUser({\n      _id: data?.getUsers[0]?._id,\n      name: data?.getUsers[0]?.name,\n      email: data?.getUsers[0]?.email,\n      bio: data?.getUsers[0]?.bio,\n      imageUrl: data?.getUsers[0]?.imageUrl,\n      status: data?.getUsers[0]?.status\n    })\n  }, [data]);\n\n  const handleChange = (event: ChangeEvent<HTMLInputElement>) => {\n    const stateKey = event.currentTarget.name;\n    const newValue = event.currentTarget.value;\n    setUser(prevState => ({\n      ...prevState,\n      [stateKey]: newValue\n    }));\n  };\n\n  const handleSubmit = async (event: FormEvent) => {\n    event.preventDefault();\n    const userDetails: User = {\n      _id: user._id,\n      name: user.name,\n      email: user.email,\n      bio: user.bio,\n      status: user.status\n    }\n    if (imageFile) {\n      const data = new FormData();\n      data.append('file', imageFile);\n      data.append('upload_preset', 'jfoqugj1');\n      data.append('api_key', 'process.env.NODE_ENV.REACT_APP_CLOUDINARY_API_KEY');\n      const res = await fetch (\n        'https://api.cloudinary.com/v1_1/dpyiqv7ej/image/upload',\n        {\n          method: 'POST',\n          body: data,\n        }\n      );\n      const upload = await res.json();\n      userDetails.imageUrl = upload.url;\n    }\n    updateUserInfo({\n      variables: {\n        userDetails: userDetails,\n      }\n    });\n  };\n\n  const uploadImage = async (event: ChangeEvent<HTMLInputElement>) => {\n    const file = event.currentTarget.files;\n    if (file && file[0]) {\n      setImageFile(file[0]);\n    }\n  };\n\n  return (\n    <div className=\"user-settings-container\">\n\n      <div>\n        User Settings\n      </div>\n\n      <form\n        className=\"form-user-settings\"\n        onSubmit={handleSubmit}\n      >\n        <div>\n          <img src={user.imageUrl} alt=\"user_image\" width=\"300\"/>\n        </div>\n        <div>\n          <h2>Upload New Profile Image</h2>\n          <input\n            name=\"file\"\n            type=\"file\"\n            placeholder=\"Upload a new profile image\"\n            onChange={uploadImage}\n          />\n        </div>\n\n        <label htmlFor=\"name\">Name</label>\n        <input\n          id=\"name\"\n          placeholder={user.name}\n          name=\"name\"\n          type=\"text\"\n          value={user.name}\n          onChange={handleChange}\n        >\n        </input>\n\n        <label htmlFor=\"email\">Email</label>\n        <input\n          id=\"email\"\n          placeholder={user.email}\n          name=\"email\"\n          type=\"text\"\n          value={user.email}\n          onChange={handleChange}\n        >\n        </input>\n\n        <label htmlFor=\"bio\">Bio</label>\n        <input\n          id=\"bio\"\n          placeholder={user.bio}\n          name=\"bio\"\n          type=\"text\"\n          value={user.bio}\n          onChange={handleChange}\n        >\n        </input>\n\n        <label htmlFor=\"status\">Status</label>\n        <input\n          id=\"status\"\n          placeholder={user.status}\n          name=\"status\"\n          type=\"text\"\n          value={user.status}\n          onChange={handleChange}\n        >\n        </input>\n\n       <button\n        type=\"submit\"\n       >\n         Save Changes\n       </button>\n\n      </form>\n    </div>\n  )\n};\n\nexport default UserSettings;"]},"metadata":{},"sourceType":"module"}